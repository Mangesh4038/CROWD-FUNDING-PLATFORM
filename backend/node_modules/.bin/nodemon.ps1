#!/usr/bin/env pwsh

$scriptDir = Split-Path $MyInvocation.MyCommand.Definition -Parent
$nodeExe = if ($PSVersionTable.PSVersion -lt "6.0" -or $IsWindows) { ".exe" } else { "" }
$nodemonPath = "$scriptDir/../nodemon/bin/nodemon.js"

if (-not (Test-Path "$scriptDir/node$nodeExe")) {
    Write-Error "Node.js executable not found in $scriptDir"
    exit 1
}

if (-not (Test-Path $nodemonPath)) {
    Write-Error "Nodemon executable not found in $nodemonPath"
    exit 1
}

& "$scriptDir/node$nodeExe" $nodemonPath @args
exit $LASTEXITCODE
