#!/usr/bin/env pwsh

$basedir = Split-Path $MyInvocation.MyCommand.Definition -Parent
$exe = if ($PSVersionTable.PSVersion -lt "6.0" -or $IsWindows) { ".exe" } else { "" }
$rimrafPath = Join-Path $basedir "../rimraf/bin.js"
$nodePath = "$basedir/node$exe"
$rimrafArgs = @()

if ($MyInvocation.ExpectingInput) {
    $rimrafArgs = $input
} else {
    $rimrafArgs = $args
}

if (-not (Test-Path $nodePath)) {
    $nodePath = "node$exe"
}

& $nodePath $rimrafPath $rimrafArgs
exit $LASTEXITCODE
