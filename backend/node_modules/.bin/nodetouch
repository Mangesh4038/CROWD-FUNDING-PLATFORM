#!/bin/sh

# Get the basedir using realpath for portability
if which realpath >/dev/null 2>&1; then
  basedir=$(realpath "$(dirname "$0")")
elif which python3 >/dev/null 2>&1; then
  basedir=$(python3 -c "import os; print(os.path.realpath('$0').decode('utf-8'))")
else
  echo "Error: cannot determine basedir"
  exit 1
fi

# Use nodejs instead of node to support different systems
if [ -x "$basedir/nodejs" ]; then
  exec "$basedir/nodejs"  "$basedir/../touch/bin/nodetouch.js" "$@"
else
  exec nodejs  "$basedir/../touch/bin/nodetouch.js" "$@"
fi

